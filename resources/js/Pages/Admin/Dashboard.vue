<script setup>
import AdminLayout from '@/Layouts/AdminLayout.vue';
import { Head, Link } from '@inertiajs/vue3';

defineProps({
    stats: Object,
    recentUsers: Array,
    recentProgress: Array,
});
</script>

<template>
    <Head title="ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰" />

    <AdminLayout>
        <template #title>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</template>

        <!-- Stats Grid -->
        <div class="grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 mb-8">
            <div class="rounded-xl bg-slate-800 border border-slate-700 p-6">
                <div class="text-3xl mb-2">ğŸ‘¥</div>
                <div class="text-2xl font-bold text-white">{{ stats.totalUsers }}</div>
                <div class="text-sm text-slate-400">ç·ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°</div>
            </div>
            <div class="rounded-xl bg-slate-800 border border-slate-700 p-6">
                <div class="text-3xl mb-2">ğŸ“š</div>
                <div class="text-2xl font-bold text-white">{{ stats.totalCourses }}</div>
                <div class="text-sm text-slate-400">ã‚³ãƒ¼ã‚¹æ•°</div>
            </div>
            <div class="rounded-xl bg-slate-800 border border-slate-700 p-6">
                <div class="text-3xl mb-2">ğŸ“–</div>
                <div class="text-2xl font-bold text-white">{{ stats.totalLessons }}</div>
                <div class="text-sm text-slate-400">ãƒ¬ãƒƒã‚¹ãƒ³æ•°</div>
            </div>
            <div class="rounded-xl bg-slate-800 border border-slate-700 p-6">
                <div class="text-3xl mb-2">ğŸ†</div>
                <div class="text-2xl font-bold text-white">{{ stats.totalBadges }}</div>
                <div class="text-sm text-slate-400">ãƒãƒƒã‚¸æ•°</div>
            </div>
            <div class="rounded-xl bg-slate-800 border border-slate-700 p-6">
                <div class="text-3xl mb-2">âœ…</div>
                <div class="text-2xl font-bold text-emerald-400">{{ stats.completedLessons }}</div>
                <div class="text-sm text-slate-400">å®Œäº†ãƒ¬ãƒƒã‚¹ãƒ³</div>
            </div>
            <div class="rounded-xl bg-slate-800 border border-slate-700 p-6">
                <div class="text-3xl mb-2">ğŸ”¥</div>
                <div class="text-2xl font-bold text-amber-400">{{ stats.activeUsers }}</div>
                <div class="text-sm text-slate-400">ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼</div>
            </div>
        </div>

        <div class="grid lg:grid-cols-2 gap-8">
            <!-- Recent Users -->
            <div>
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-xl font-bold text-white">ğŸ‘¥ æœ€æ–°ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼</h2>
                    <Link :href="route('admin.users.index')" class="text-sm text-cyan-400 hover:text-cyan-300">
                        ã™ã¹ã¦è¦‹ã‚‹ â†’
                    </Link>
                </div>
                <div class="rounded-xl bg-slate-800 border border-slate-700 divide-y divide-slate-700">
                    <div 
                        v-for="user in recentUsers"
                        :key="user.id"
                        class="p-4 flex items-center justify-between"
                    >
                        <div>
                            <div class="font-medium text-white">{{ user.name }}</div>
                            <div class="text-sm text-slate-400">{{ user.email }}</div>
                        </div>
                        <div class="text-right">
                            <div class="text-sm text-amber-400">Lv.{{ user.level }}</div>
                            <div class="text-xs text-slate-500">{{ user.total_points }}pt</div>
                        </div>
                    </div>
                    <div v-if="recentUsers.length === 0" class="p-8 text-center text-slate-400">
                        ã¾ã ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã„ã¾ã›ã‚“
                    </div>
                </div>
            </div>

            <!-- Recent Progress -->
            <div>
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-xl font-bold text-white">ğŸ“ æœ€è¿‘ã®å­¦ç¿’æ´»å‹•</h2>
                </div>
                <div class="rounded-xl bg-slate-800 border border-slate-700 divide-y divide-slate-700">
                    <div 
                        v-for="progress in recentProgress"
                        :key="progress.id"
                        class="p-4 flex items-center gap-4"
                    >
                        <div class="w-10 h-10 rounded-lg bg-emerald-500/20 flex items-center justify-center text-lg">
                            âœ…
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="font-medium text-white truncate">{{ progress.user?.name }}</div>
                            <div class="text-sm text-slate-400 truncate">{{ progress.lesson?.title }}</div>
                        </div>
                    </div>
                    <div v-if="recentProgress.length === 0" class="p-8 text-center text-slate-400">
                        ã¾ã å­¦ç¿’æ´»å‹•ãŒã‚ã‚Šã¾ã›ã‚“
                    </div>
                </div>
            </div>
        </div>
    </AdminLayout>
</template>

